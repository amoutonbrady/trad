# Migration `20200802191917-init`

This migration has been generated by Alexandre Mouton-Brady at 8/2/2020, 7:19:17 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "public"."User" (
"id" SERIAL,
"email" text  NOT NULL ,
"password" text  NOT NULL ,
"name" text  NOT NULL ,
PRIMARY KEY ("id"))

CREATE TABLE "public"."Lang" (
"id" SERIAL,
"name" text  NOT NULL ,
"slug" text  NOT NULL ,
"rtl" boolean  NOT NULL ,
"code" text  NOT NULL ,
"index" SERIAL,
PRIMARY KEY ("id"))

CREATE TABLE "public"."Group" (
"id" SERIAL,
"name" text  NOT NULL ,
"screenshot" text  NOT NULL ,
"index" SERIAL,
"projectId" integer  NOT NULL ,
PRIMARY KEY ("id"))

CREATE TABLE "public"."Project" (
"id" SERIAL,
"name" text  NOT NULL ,
"index" SERIAL,
"userId" integer  NOT NULL ,
PRIMARY KEY ("id"))

CREATE TABLE "public"."Label" (
"id" SERIAL,
"value" text  NOT NULL ,
"index" SERIAL,
"langId" integer  NOT NULL ,
"positionId" integer  NOT NULL ,
"groupId" integer  NOT NULL ,
PRIMARY KEY ("id"))

CREATE TABLE "public"."Position" (
"id" SERIAL,
"x" Decimal(65,30)  NOT NULL ,
"y" Decimal(65,30)  NOT NULL ,
PRIMARY KEY ("id"))

CREATE UNIQUE INDEX "User.email" ON "public"."User"("email")

ALTER TABLE "public"."Group" ADD FOREIGN KEY ("projectId")REFERENCES "public"."Project"("id") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "public"."Project" ADD FOREIGN KEY ("userId")REFERENCES "public"."User"("id") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "public"."Label" ADD FOREIGN KEY ("langId")REFERENCES "public"."Lang"("id") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "public"."Label" ADD FOREIGN KEY ("positionId")REFERENCES "public"."Position"("id") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "public"."Label" ADD FOREIGN KEY ("groupId")REFERENCES "public"."Group"("id") ON DELETE CASCADE ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration ..20200802191917-init
--- datamodel.dml
+++ datamodel.dml
@@ -1,0 +1,67 @@
+// This is your Prisma schema file,
+// learn more about it in the docs: https://pris.ly/d/prisma-schema
+
+datasource db {
+  provider = "postgresql"
+  url = "***"
+}
+
+generator client {
+  provider = "prisma-client-js"
+}
+
+model User {
+  id       Int       @default(autoincrement()) @id
+  email    String    @unique
+  password String
+  name     String
+  projects Project[]
+}
+
+model Lang {
+  id    Int     @default(autoincrement()) @id
+  name  String
+  slug  String
+  rtl   Boolean
+  code  String
+  index Int     @default(autoincrement())
+  Label Label[]
+}
+
+model Group {
+  id         Int     @default(autoincrement()) @id
+  name       String
+  screenshot String
+  index      Int     @default(autoincrement())
+  labels     Label[]
+  project    Project @relation(fields: [projectId], references: [id])
+  projectId  Int
+}
+
+model Project {
+  id     Int     @default(autoincrement()) @id
+  name   String
+  index  Int     @default(autoincrement())
+  groups Group[]
+  User   User    @relation(fields: [userId], references: [id])
+  userId Int
+}
+
+model Label {
+  id         Int      @default(autoincrement()) @id
+  value      String
+  index      Int      @default(autoincrement())
+  lang       Lang     @relation(fields: [langId], references: [id])
+  langId     Int
+  position   Position @relation(fields: [positionId], references: [id])
+  positionId Int
+  group      Group    @relation(fields: [groupId], references: [id])
+  groupId    Int
+}
+
+model Position {
+  id    Int     @default(autoincrement()) @id
+  x     Float
+  y     Float
+  label Label[]
+}
```


